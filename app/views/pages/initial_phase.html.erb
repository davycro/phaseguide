<div class="container">

  <div class="schedule_header">

    <div class="StartDateSelector">
      <label>Start Date:</label>
      <%= select_date(@start_date, order: [:month, :day, :year]) %>
    </div>
    Phase ends on:
    Today is day 15 of 56; and dose 3 of 32. The patient has missed 12 doses.
    
  </div>

  <div class="Schedule">
    <%- @schedule.weeks.each_with_index do |week, index| -%>
      <div class="<%= week.class %> week">
        <div class="week_label">
          Week #<%= index+1 %>
        </div>
        <%- week.days.each do |day| -%>
          <div class="<%= day.class %> day">
            <%= day.date.to_formatted_s(:short) %>

            <%- if day.class==MedicationDay %>
              <div class="dose_taken_text">
                <label class='label label-primary'>Take Meds</label>
              </div>
              <div class="missed_dose_text">MISSED!</div>
            <% end -%>

            <%- if day.class==HoldDay %>
              <p>Hold</p>
            <% end -%>
          </div>
        <% end -%>
      </div>
    <% end -%>

    <%- @schedule.catchup_weeks.each_with_index do |week, index| -%>
      <div class="<%= week.class %> week">
        <div class="week_label">
          Makeup Week #<%= index+1 %>
        </div>
        <%- week.days.each do |day| -%>
          <div class="<%= day.class %> day inactive">
            <%= day.date.to_formatted_s(:short) %>

            <%- if day.class==CatchupDay -%>
              <div class="dose_taken_text">
                <label class='label label-info'>Makeup</label>
              </div>
              <div class="missed_dose_text">MISSED!</div>
            <% end -%>

            <%- if day.class==HoldDay %>
              <p>Hold</p>
            <% end -%>
          </div>
        <% end -%>
      </div>
    <% end -%>
  </div>

</div>

